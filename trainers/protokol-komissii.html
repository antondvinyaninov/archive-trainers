<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂–µ—Ä: –ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞—Å–µ–¥–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-header {
            background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
        }
        
        .protocol-document {
            font-family: 'Times New Roman', serif;
            line-height: 1.5;
        }
        
        .input-field {
            border-bottom: 2px solid #3b82f6;
            background: #eff6ff;
            padding: 2px 8px;
            margin: 0 4px;
            min-width: 120px;
            display: inline-block;
            font-family: 'Times New Roman', serif;
        }
        
        .correct {
            border-color: #10b981;
            background: #d1fae5;
        }
        
        .incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }
        
        @media print {
            .no-print {
                display: none;
            }
        }
        
        .timer-fixed {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 1000;
            background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
            color: white;
            padding: 16px 20px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(234, 88, 12, 0.4);
        }
        
        .timer-warning {
            animation: pulse 1s infinite;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 768px) {
            .gradient-header h1 {
                font-size: 1.75rem !important;
            }
            
            .gradient-header p {
                font-size: 1rem !important;
            }
            
            .timer-fixed {
                bottom: 12px;
                right: 12px;
                padding: 12px 16px;
                border-radius: 12px;
            }
            
            .timer-fixed .text-3xl {
                font-size: 1.5rem;
            }
            
            .timer-fixed .text-2xl {
                font-size: 1.25rem;
            }
            
            .protocol-document {
                font-size: 12px;
            }
            
            .input-field {
                font-size: 12px;
                min-width: 80px;
            }
            
            body {
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            .gradient-header {
                padding: 1.5rem 0 !important;
            }
            
            .gradient-header h1 {
                font-size: 1.5rem !important;
            }
            
            .timer-fixed {
                bottom: 8px;
                right: 8px;
                padding: 8px 12px;
            }
            
            .protocol-document {
                font-size: 11px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="gradient-header text-white py-6 md:py-8 mb-6 md:mb-8">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex items-center justify-between mb-3 md:mb-4">
                <a href="../index.html" class="inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 text-white px-3 md:px-4 py-2 rounded-lg transition text-sm md:text-base">
                    <span>‚Üê</span>
                    <span>–ù–∞ –≥–ª–∞–≤–Ω—É—é</span>
                </a>
                <div class="text-xs md:text-sm opacity-90">–ê–ù–û –î–ü–û ¬´–£–¶–ò–ë¬ª</div>
            </div>
            <h1 class="text-2xl md:text-4xl font-bold mb-2">üìë –ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞—Å–µ–¥–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏</h1>
            <p class="text-base md:text-xl opacity-90">–¢—Ä–µ–Ω–∞–∂–µ—Ä –ø–æ –∞—Ä—Ö–∏–≤–Ω–æ–º—É –¥–µ–ª—É</p>
        </div>
    </div>
    
    <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä -->
    <div id="timer" class="timer-fixed no-print">
        <div class="flex items-center gap-3">
            <span class="text-3xl">‚è±Ô∏è</span>
            <div>
                <div class="text-xs opacity-90 font-medium">–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏</div>
                <div id="timer-display" class="text-2xl font-bold">10:00</div>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto px-4 pb-8">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6 no-print">
            <div class="bg-orange-50 border-l-4 border-orange-500 p-4 mb-4 rounded-r-lg">
                <p class="text-lg font-medium text-orange-900 mb-2">üìù –ó–∞–¥–∞–Ω–∏–µ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞:</p>
                <p class="text-gray-700">
                    –ó–∞–ø–æ–ª–Ω–∏—Ç–µ "–ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞—Å–µ–¥–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏" —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.
                    –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ –æ–±—Ä–∞–∑–µ—Ü –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø–æ–ª—è.
                </p>
            </div>
            
            <!-- Situation Description -->
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4">
                <h3 class="font-semibold text-gray-800 mb-2">üìå –°–∏—Ç—É–∞—Ü–∏—è:</h3>
                <p class="text-gray-700">
                    –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è –ê–ù–û –î–ü–û ¬´–£–¶–ò–ë¬ª –ø—Ä–æ–≤–æ–¥–∏—Ç –∑–∞—Å–µ–¥–∞–Ω–∏–µ 15 –º–∞—Ä—Ç–∞ 2026 –≥–æ–¥–∞. 
                    –ü—Ä–æ—Ç–æ–∫–æ–ª—É –ø—Ä–∏—Å–≤–æ–µ–Ω –Ω–æ–º–µ—Ä 3. –ó–∞—Å–µ–¥–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤ –≥. –¢–æ–º—Å–∫.
                    –ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å –∫–æ–º–∏—Å—Å–∏–∏ - –°–∫–æ–ø–∞ –ù.–ú., —Å–µ–∫—Ä–µ—Ç–∞—Ä—å - –§—Ä–æ–ª–æ–≤–∞ –ï.–ú.
                    –ù–∞ –ø–æ–≤–µ—Å—Ç–∫–µ –¥–Ω—è - —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –æ–ø–∏—Å–∏ –¥–µ–ª –∑–∞ 2023 –≥–æ–¥.
                    –û–ø–∏—Å—å –∏–º–µ–µ—Ç –Ω–æ–º–µ—Ä 2.
                </p>
            </div>
            
            <div class="flex gap-4 mb-4">
                <button onclick="checkAnswers()" class="bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition shadow-md">
                    ‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
                </button>
                <button onclick="resetForm()" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition shadow-md">
                    üîÑ –°–±—Ä–æ—Å–∏—Ç—å
                </button>
            </div>
            
            <div id="result" class="hidden mt-4 p-4 rounded-lg"></div>
        </div>
        
        <!-- Protocol Document -->
        <div class="bg-white rounded-xl shadow-lg p-8">
            <div class="protocol-document text-center">
                <p class="font-bold">–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</p>
                <p class="font-bold">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</p>
                <p class="font-bold">¬´–£—á–µ–±–Ω—ã–π —Ü–µ–Ω—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏¬ª</p>
                <p class="font-bold">(–ê–ù–û –î–ü–û ¬´–£–¶–ò–ë¬ª)</p>
                
                <p class="font-bold mt-6 text-xl">–ü–†–û–¢–û–ö–û–õ</p>
                
                <div class="flex justify-between mt-4 px-12">
                    <div>
                        <input type="text" id="date" class="input-field" placeholder="–î–∞—Ç–∞" data-answer="15.03.2024">
                    </div>
                    <div>
                        ‚Ññ <input type="text" id="number" class="input-field w-24" placeholder="–ù–æ–º–µ—Ä" data-answer="3">
                    </div>
                </div>
                
                <p class="mt-4">
                    <input type="text" id="city" class="input-field" placeholder="–ì–æ—Ä–æ–¥" data-answer="–≥. –¢–æ–º—Å–∫">
                </p>
                
                <p class="font-bold mt-4">–∑–∞—Å–µ–¥–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏</p>
            </div>
            
            <div class="protocol-document mt-6">
                <p>–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å ‚Äì <input type="text" id="chairman" class="input-field w-48" placeholder="–§–ò–û –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è" data-answer="–°–∫–æ–ø–∞ –ù.–ú."></p>
                <p>–°–µ–∫—Ä–µ—Ç–∞—Ä—å ‚Äì <input type="text" id="secretary" class="input-field w-48" placeholder="–§–ò–û —Å–µ–∫—Ä–µ—Ç–∞—Ä—è" data-answer="–§—Ä–æ–ª–æ–≤–∞ –ï.–ú."></p>
                
                <p class="mt-4">–ü—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏: –≥–ª–∞–≤–Ω—ã–π –±—É—Ö–≥–∞–ª—Ç–µ—Ä –ê. –ù. –ú–∞–π–∫–æ–≤–∞, —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –ï. –ú. –§—Ä–æ–ª–æ–≤–∞</p>
                
                <p class="font-bold mt-4">
                    <input type="text" id="agenda" class="input-field w-48" placeholder="–†–∞–∑–¥–µ–ª" data-answer="–ü–û–í–ï–°–¢–ö–ê –î–ù–Ø">:
                </p>
                <p>1. –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∏ –¥–µ–ª –ø–æ –ª–∏—á–Ω–æ–º—É —Å–æ—Å—Ç–∞–≤—É –∑–∞ 2023 –≥–æ–¥. –î–æ–∫–ª–∞–¥ –∞—Ä—Ö–∏–≤–∏—Å—Ç–∞ –°–∫–æ–ø–∞ –ù.–ú.</p>
                
                <p class="font-bold mt-4">–°–õ–£–®–ê–õ–ò:</p>
                <p>–°–∫–æ–ø–∞ –ù. –ú. ‚Äì –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å—å –¥–µ–ª –ø–æ –ª–∏—á–Ω–æ–º—É —Å–æ—Å—Ç–∞–≤—É –∑–∞ 
                    <input type="text" id="year" class="input-field w-24" placeholder="–ì–æ–¥" data-answer="2023"> –≥–æ–¥, 
                    —Å–æ–¥–µ—Ä–∂–∞–≤—à—É—é 1 –µ–¥–∏–Ω–∏—Ü—É —Ö—Ä–∞–Ω–µ–Ω–∏—è.
                </p>
                
                <p class="font-bold mt-4">–†–ï–®–ò–õ–ò:</p>
                <p>–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –æ–ø–∏—Å—å –¥–µ–ª –ø–æ –ª–∏—á–Ω–æ–º—É —Å–æ—Å—Ç–∞–≤—É ‚Ññ 
                    <input type="text" id="opis_number" class="input-field w-24" placeholder="‚Ññ" data-answer="2">, 
                    –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –µ–µ –Ω–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—É –ê–ù–û –î–ü–û ¬´–£–¶–ò–ë¬ª.
                </p>
                
                <div class="mt-8">
                    <div class="flex justify-between px-12">
                        <p>–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å</p>
                        <p><input type="text" id="chairman_sign" class="input-field w-48" placeholder="–§–ò–û" data-answer="–ù.–ú. –°–∫–æ–ø–∞"></p>
                    </div>
                    <div class="flex justify-between px-12 mt-2">
                        <p>–°–µ–∫—Ä–µ—Ç–∞—Ä—å</p>
                        <p><input type="text" id="secretary_sign" class="input-field w-48" placeholder="–§–ò–û" data-answer="–ï.–ú. –§—Ä–æ–ª–æ–≤–∞"></p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Instructions -->
        <div class="bg-white rounded-xl shadow-lg p-6 mt-6 no-print">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">üìö –ü–æ–¥—Å–∫–∞–∑–∫–∏:</h3>
            <ul class="list-disc list-inside space-y-2 text-gray-700">
                <li>–î–∞—Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –¥–∞—Ç–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∑–∞—Å–µ–¥–∞–Ω–∏—è</li>
                <li>–ù–æ–º–µ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –≥–æ–¥–∞</li>
                <li>–§–ò–û –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∫–∞–∑–∞–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–§–∞–º–∏–ª–∏—è –ò.–û.)</li>
                <li>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–º–µ—Ä–∞ –æ–ø–∏—Å–∏ –≤ —Ç–µ–∫—Å—Ç–µ</li>
                <li>–†–∞–∑–¥–µ–ª "–ü–û–í–ï–°–¢–ö–ê –î–ù–Ø" - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞</li>
            </ul>
        </div>
    </div>
    
    <script>
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
        const urlParams = new URLSearchParams(window.location.search);
        const isExamMode = urlParams.get('mode') === 'exam';
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∂–∏–º–∞
        const MODE_CONFIG = {
            training: {
                time: 600, // 10 –º–∏–Ω—É—Ç
                showHints: true,
                allowMultipleAttempts: true,
                title: 'üìë –ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞—Å–µ–¥–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏'
            },
            exam: {
                time: 420, // 7 –º–∏–Ω—É—Ç
                showHints: false,
                allowMultipleAttempts: false,
                title: 'üéì –≠–∫–∑–∞–º–µ–Ω: –ü—Ä–æ—Ç–æ–∫–æ–ª –∑–∞—Å–µ–¥–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–∏'
            }
        };
        
        const currentMode = isExamMode ? MODE_CONFIG.exam : MODE_CONFIG.training;
        let attemptsMade = 0;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        document.querySelector('.gradient-header h1').textContent = currentMode.title;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∂–∏–º–∞
        if (isExamMode) {
            const header = document.querySelector('.gradient-header .max-w-6xl');
            const examBadge = document.createElement('div');
            examBadge.className = 'mt-4 inline-block bg-red-500 text-white px-6 py-2 rounded-full font-semibold';
            examBadge.innerHTML = '‚ö†Ô∏è –†–ï–ñ–ò–ú –≠–ö–ó–ê–ú–ï–ù–ê: –û–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞, –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫';
            header.appendChild(examBadge);
        }
        
        // Correct answers based on the situation
        const correctAnswers = {
            date: '15.03.2026',
            number: '3',
            city: '–≥. –¢–æ–º—Å–∫',
            chairman: '–°–∫–æ–ø–∞ –ù.–ú.',
            secretary: '–§—Ä–æ–ª–æ–≤–∞ –ï.–ú.',
            agenda: '–ü–û–í–ï–°–¢–ö–ê –î–ù–Ø',
            year: '2023',
            opis_number: '2',
            chairman_sign: '–ù.–ú. –°–∫–æ–ø–∞',
            secretary_sign: '–ï.–ú. –§—Ä–æ–ª–æ–≤–∞'
        };
        
        // –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        const STORAGE_KEY = 'archiveTraining_progress';
        
        function getProgress() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : {};
        }
        
        function saveProgressData(trainerId, data) {
            const progress = getProgress();
            if (!progress[trainerId]) {
                progress[trainerId] = {
                    attempts: 0,
                    bestScore: 0,
                    bestTime: null,
                    completed: false,
                    lastAttempt: null
                };
            }
            
            progress[trainerId] = { ...progress[trainerId], ...data };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
        }
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        function checkAnswers() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø—ã—Ç–æ–∫ –≤ —Ä–µ–∂–∏–º–µ —ç–∫–∑–∞–º–µ–Ω–∞
            if (isExamMode && attemptsMade >= 1) {
                return;
            }
            
            let correct = 0;
            let total = 0;
            
            for (let id in correctAnswers) {
                const input = document.getElementById(id);
                const userAnswer = input.value.trim();
                const correctAnswer = correctAnswers[id];
                
                total++;
                
                if (userAnswer === correctAnswer) {
                    input.classList.remove('incorrect');
                    input.classList.add('correct');
                    correct++;
                } else if (userAnswer) {
                    input.classList.remove('correct');
                    input.classList.add('incorrect');
                } else {
                    input.classList.remove('correct', 'incorrect');
                }
            }
            
            const resultDiv = document.getElementById('result');
            resultDiv.classList.remove('hidden');
            
            const percentage = Math.round((correct / total) * 100);
            const timeSpent = startTime - timeLeft;
            const progress = getProgress()['protokol-komissii'] || {};
            const attempts = (progress.attempts || 0) + 1;
            const isNewBest = correct > (progress.bestScore || 0);
            const isFasterTime = !progress.bestTime || timeSpent < progress.bestTime;
            
            // –†–∞—Å—á–µ—Ç –æ—Ü–µ–Ω–∫–∏ –¥–ª—è —Ä–µ–∂–∏–º–∞ —ç–∫–∑–∞–º–µ–Ω–∞
            let grade = '';
            let gradeColor = '';
            
            if (isExamMode) {
                if (percentage >= 90) {
                    grade = '5 (–û—Ç–ª–∏—á–Ω–æ)';
                    gradeColor = 'text-green-600';
                } else if (percentage >= 75) {
                    grade = '4 (–•–æ—Ä–æ—à–æ)';
                    gradeColor = 'text-blue-600';
                } else if (percentage >= 60) {
                    grade = '3 (–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ)';
                    gradeColor = 'text-yellow-600';
                } else {
                    grade = '2 (–ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ)';
                    gradeColor = 'text-red-600';
                }
            }
            
            saveProgressData('protokol-komissii', {
                attempts: attempts,
                bestScore: isNewBest ? correct : progress.bestScore,
                bestTime: (isNewBest || isFasterTime) ? timeSpent : progress.bestTime,
                completed: percentage === 100,
                lastAttempt: new Date().toISOString(),
                lastScore: correct,
                examGrade: isExamMode ? grade : null
            });
            
            if (percentage === 100) {
                resultDiv.className = 'mt-4 p-4 rounded-lg bg-green-100 border border-green-400 text-green-800';
                resultDiv.innerHTML = `
                    <p class="font-semibold text-lg">üéâ –û—Ç–ª–∏—á–Ω–æ!</p>
                    <p>–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –≤—Å–µ –ø–æ–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (${correct}/${total}).</p>
                    <div class="text-sm mt-2">–í—Ä–µ–º—è: ${formatTime(timeSpent)} | –ü–æ–ø—ã—Ç–∫–∞: ${attempts}</div>
                    ${isExamMode ? `<div class="text-3xl font-bold ${gradeColor} mt-4">–û—Ü–µ–Ω–∫–∞: ${grade}</div>` : ''}
                    ${!isExamMode && isNewBest ? '<div class="text-sm mt-1">üèÜ –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥!</div>' : ''}
                    ${!isExamMode && progress.bestScore ? `<div class="text-sm mt-1">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${progress.bestScore}/${total} –∑–∞ ${formatTime(progress.bestTime)}</div>` : ''}
                `;
            } else if (percentage >= 70) {
                resultDiv.className = 'mt-4 p-4 rounded-lg bg-yellow-100 border border-yellow-400 text-yellow-800';
                resultDiv.innerHTML = `
                    <p class="font-semibold text-lg">üëç –•–æ—Ä–æ—à–æ!</p>
                    <p>–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ ${correct} –∏–∑ ${total} –ø–æ–ª–µ–π (${percentage}%).</p>
                    ${currentMode.showHints ? '<p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è, –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º.</p>' : '<p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —ç–∫–∑–∞–º–µ–Ω–∞.</p>'}
                    <div class="text-sm mt-2">–í—Ä–µ–º—è: ${formatTime(timeSpent)} | –ü–æ–ø—ã—Ç–∫–∞: ${attempts}</div>
                    ${isExamMode ? `<div class="text-3xl font-bold ${gradeColor} mt-4">–û—Ü–µ–Ω–∫–∞: ${grade}</div>` : ''}
                    ${!isExamMode && progress.bestScore ? `<div class="text-sm mt-1">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${progress.bestScore}/${total} –∑–∞ ${formatTime(progress.bestTime)}</div>` : ''}
                    ${isExamMode ? '<div class="text-sm text-red-600 mt-2">‚ö†Ô∏è –í —Ä–µ–∂–∏–º–µ —ç–∫–∑–∞–º–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞</div>' : ''}
                `;
            } else {
                resultDiv.className = 'mt-4 p-4 rounded-lg bg-red-100 border border-red-400 text-red-800';
                resultDiv.innerHTML = `
                    <p class="font-semibold text-lg">üìù –ù—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å</p>
                    <p>–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ ${correct} –∏–∑ ${total} –ø–æ–ª–µ–π (${percentage}%).</p>
                    ${currentMode.showHints ? '<p>–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</p>' : '<p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —ç–∫–∑–∞–º–µ–Ω–∞.</p>'}
                    <div class="text-sm mt-2">–í—Ä–µ–º—è: ${formatTime(timeSpent)} | –ü–æ–ø—ã—Ç–∫–∞: ${attempts}</div>
                    ${isExamMode ? `<div class="text-3xl font-bold ${gradeColor} mt-4">–û—Ü–µ–Ω–∫–∞: ${grade}</div>` : ''}
                    ${!isExamMode && progress.bestScore ? `<div class="text-sm mt-1">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${progress.bestScore}/${total} –∑–∞ ${formatTime(progress.bestTime)}</div>` : ''}
                    ${isExamMode ? '<div class="text-sm text-red-600 mt-2">‚ö†Ô∏è –í —Ä–µ–∂–∏–º–µ —ç–∫–∑–∞–º–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞</div>' : ''}
                `;
            }
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤ —Ä–µ–∂–∏–º–µ —ç–∫–∑–∞–º–µ–Ω–∞
            if (isExamMode) {
                attemptsMade++;
                const checkButton = document.querySelector('button[onclick="checkAnswers()"]');
                if (checkButton) {
                    checkButton.disabled = true;
                    checkButton.classList.add('opacity-50', 'cursor-not-allowed');
                    checkButton.textContent = '‚úì –≠–∫–∑–∞–º–µ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω';
                }
            }
        }
        

        function resetForm() {
            for (let id in correctAnswers) {
                const input = document.getElementById(id);
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            }
            
            const resultDiv = document.getElementById('result');
            resultDiv.classList.add('hidden');
        }
        
        // –¢–∞–π–º–µ—Ä
        let timeLeft = currentMode.time;
        let timerInterval;
        let timerStarted = false;
        let startTime = currentMode.time;

        function startTimer() {
            if (timerStarted) return;
            timerStarted = true;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeUp();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            const timerElement = document.getElementById('timer-display');
            timerElement.textContent = display;
            
            if (timeLeft <= 120 && timeLeft > 0) {
                document.getElementById('timer').classList.add('timer-warning');
            }
            
            if (timeLeft <= 0) {
                timerElement.textContent = '0:00';
            }
        }

        function handleTimeUp() {
            alert('‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ! –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã...');
            checkAnswers();
        }
        
        // Add Enter key support for moving between fields
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach((input, index) => {
                // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ñ–æ–∫—É—Å–µ
                input.addEventListener('focus', startTimer, { once: true });
                
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        if (index < inputs.length - 1) {
                            inputs[index + 1].focus();
                        } else {
                            checkAnswers();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>